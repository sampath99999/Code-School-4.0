<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Users</title>

    <link
      defer
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    ></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>

  <body>
    <div id="main" class="row d-flex justify-content-center"></div>
  </body>

  <script>
    $(document).ready(function () {
      function generateHtml(user) {
        let Html = `<div id="user-${
          user.id
        }" class="col-md-3 col-sm-6 col-12 card d-flex flex-column justify-content-center align-items-center m-2 py-1 shadow">
                        <img src="${
                          user.image
                        } " class="card-img-top w-75 border" alt="...">
                        <div class="card-body w-100">
                            <h5 class="card-title text-center">${user.id} </h5>
                            <p  class="card-text text-center text-uppercase fs-3 fw-bold">${
                              user.firstName
                            }</p>

                            <div class=" d-flex justify-content-around">
                               <div> <a href="#" class="btn btn-primary">Update</a> </div>
                               <div> <a id="${
                                 user.id + "-btn"
                               }" href="#" class="btn btn-danger">Delete</a> </div>
                            </div>
                            
                        </div>
                        </div>`;
        return Html;
      }

      $.get({
        url: "https://dummyjson.com/users",
        contentType: "application/json",
        success: function (response) {
          for (let user of response.users) {
            // console.log(generateHtml(user))
            $("#main").append(generateHtml(user));
          }
        },
      });

      $(document).on("click", ".btn-danger", function () {
        let userId = $(this).attr("id").split("-")[0];
        // console.log(userId);

        $.ajax({
          url: `https://dummyjson.com/users/${userId}`,
          method: "DELETE",
          success: function (response) {
            $(`#user-${userId}`).remove();
          },
          error: function () {},
        });
      });
    });
  </script>
</html>
