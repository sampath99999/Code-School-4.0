<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        .table-responsive {
            max-height: 80vh;
            overflow-y: auto;
        }
        .table th {
            position: sticky;
            top: 0;
            z-index: 1;
        }
        @media (max-width: 768px) {
            .table-responsive {
                font-size: 0.9rem;
            }
            .table th, .table td {
                padding: 0.5rem;
            }
        }
    </style>
</head>
<body class="bg-body-secondary">
    <!-- Navbar -->
    <div id="navbar"></div>

    <div class="container-fluid bg-white rounded shadow-sm p-3 p-md-4 mt-3 mt-md-4">
        <div class="d-flex flex-column flex-md-row justify-content-between align-items-center gap-3 mb-4">
            <h2 class="h3 mb-0">Employee List</h2>
            <button class="btn btn-primary" style="min-width: 140px;" data-bs-toggle="modal" data-bs-target="#addEmployeeModal">
                <i class="fas fa-plus me-2"></i>Add Employee
            </button>
        </div>
        
        <div class="table-responsive">
            <table class="table table-hover table-striped table-bordered align-middle mb-0">
                <thead class="table-dark">
                    <tr>
                        <th class="text-nowrap">S No.</th>
                        <th class="text-nowrap">Name</th>
                        <th class="text-nowrap">Email</th>
                        <th class="text-nowrap d-none d-md-table-cell">Date of Birth</th>
                        <th class="text-nowrap d-none d-md-table-cell">Phone Number</th>
                        <th class="text-nowrap d-none d-md-table-cell">Department</th>
                        <th class="text-nowrap d-none d-md-table-cell">Designation</th>
                        <th class="text-nowrap">Pay Slip Action</th>
                    </tr>
                </thead>
                <tbody id="employeeTableBody">
                    <!-- Data -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Add Employee Modal -->
    <div class="modal fade" id="addEmployeeModal" tabindex="-1" aria-labelledby="addEmployeeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addEmployeeModalLabel">Add Employee</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addEmployeeForm">
                        <div class="row g-3">
                            <div class="col-12 col-md-6">
                                <label for="name" class="form-label">Name</label>
                                <input type="text" class="form-control" id="name" required>
                                <p class="text-danger small mt-1"></p>
                            </div>
                            <div class="col-12 col-md-6">
                                <label for="dob" class="form-label">Date of Birth</label>
                                <input type="date" class="form-control" id="dob" required>
                                <p class="text-danger small mt-1"></p>
                            </div>
                            <div class="col-12 col-md-6">
                                <label for="phone" class="form-label">Phone</label>
                                <input type="text" class="form-control" id="phone" required>
                                <p class="text-danger small mt-1"></p>
                            </div>
                            <div class="col-12 col-md-6">
                                <label for="designation" class="form-label">Designation</label>
                                <input type="text" class="form-control" id="designation" required>
                                <p class="text-danger small mt-1"></p>
                            </div>
                            <div class="col-12 col-md-6">
                                <label for="department" class="form-label">Department</label>
                                <input type="text" class="form-control" id="department" required>
                                <p class="text-danger small mt-1"></p>
                            </div>
                            <div class="col-12 col-md-6">
                                <label for="email" class="form-label">Email</label>
                                <input type="email" class="form-control" id="email" required>
                                <p class="text-danger small mt-1"></p>
                            </div>
                            <div class="col-12 col-md-6">
                                <label for="password" class="form-label">Password</label>
                                <input type="password" class="form-control" id="password" required>
                                <p class="text-danger small mt-1"></p>
                            </div>
                            <div class="col-12 col-md-6">
                                <label for="role" class="form-label">Role</label>
                                <select class="form-control" id="role" required>
                                    <option value="admin">Admin</option>
                                    <option value="employee">Employee</option>
                                </select>
                                <p class="text-danger small mt-1"></p>
                            </div>
                        </div>
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Generate Payslip Modal -->
    <div class="modal fade" id="generatePayslipModal" tabindex="-1" aria-labelledby="generatePayslipModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="generatePayslipModalLabel">Generate Payslip</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="generatePayslipForm">
                        <input type="hidden" id="employeeId" name="employeeId">
                        
                        <!-- Employee Details Section -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h6 class="mb-0">Employee Details</h6>
                            </div>
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <p class="mb-1"><strong>Name:</strong> <span id="generateEmployeeName">-</span></p>
                                    </div>
                                    <div class="col-md-4">
                                        <p class="mb-1"><strong>Department:</strong> <span id="generateEmployeeDept">-</span></p>
                                    </div>
                                    <div class="col-md-4">
                                        <p class="mb-1"><strong>Designation:</strong> <span id="generateEmployeeDesig">-</span></p>
                                    </div>
                                    <div class="col-md-4">
                                        <p class="mb-1"><strong>Email:</strong> <span id="generateEmployeeEmail">-</span></p>
                                    </div>
                                    <div class="col-md-4">
                                        <p class="mb-1"><strong>Phone:</strong> <span id="generateEmployeePhone">-</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row g-3 mb-4">
                            <div class="col-12 col-md-6">
                                <label for="month" class="form-label">Month</label>
                                <select class="form-control" id="month" name="month" required>
                                    <option value="">Select Month</option>
                                    <option value="1">January</option>
                                    <option value="2">February</option>
                                    <option value="3">March</option>
                                    <option value="4">April</option>
                                    <option value="5">May</option>
                                    <option value="6">June</option>
                                    <option value="7">July</option>
                                    <option value="8">August</option>
                                    <option value="9">September</option>
                                    <option value="10">October</option>
                                    <option value="11">November</option>
                                    <option value="12">December</option>
                                </select>
                            </div>
                            <div class="col-12 col-md-6">
                                <label for="year" class="form-label">Year</label>
                                <select class="form-control" id="year" name="year" required>
                                    <option value="">Select Year</option>
                                </select>
                            </div>
                        </div>

                        <div class="row g-3">
                            <div class="col-12 col-lg-6">
                                <div class="card h-100">
                                    <div class="card-header bg-light">
                                        <h6 class="mb-0">Earnings</h6>
                                    </div>
                                    <div class="card-body">
                                        <div id="earningsContainer" class="mb-3">
                                            <!-- Earnings added dynamically -->
                                        </div>
                                        <button type="button" class="btn btn-sm btn-outline-primary w-100" id="addEarning">
                                            <i class="fas fa-plus me-2"></i>Add Earning
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-lg-6">
                                <div class="card h-100">
                                    <div class="card-header bg-light">
                                        <h6 class="mb-0">Deductions</h6>
                                    </div>
                                    <div class="card-body">
                                        <div id="deductionsContainer" class="mb-3">
                                            <!-- Deductions added dynamically -->
                                        </div>
                                        <button type="button" class="btn btn-sm btn-outline-primary w-100" id="addDeduction">
                                            <i class="fas fa-plus me-2"></i>Add Deduction
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card mt-4">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-bordered mb-0">
                                        <tr>
                                            <th class="text-nowrap">Total Earnings</th>
                                            <td id="totalEarnings" class="text-end">₹0.00</td>
                                        </tr>
                                        <tr>
                                            <th class="text-nowrap">Total Deductions</th>
                                            <td id="totalDeductions" class="text-end">₹0.00</td>
                                        </tr>
                                        <tr class="table-primary">
                                            <th class="text-nowrap">Net Salary</th>
                                            <td id="netSalary" class="text-end">₹0.00</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-primary">Generate Payslip</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- View Payslip Modal -->
    <div class="modal fade" id="viewPayslipModal" tabindex="-1" aria-labelledby="viewPayslipModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="viewPayslipModalLabel">View Payslip</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="viewPayslipForm">
                        <input type="hidden" id="viewEmployeeId" name="employeeId">
                        
                        <!-- Employee Details Section -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h6 class="mb-0">Employee Details</h6>
                            </div>
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <p class="mb-1"><strong>Name:</strong> <span id="viewEmployeeName">-</span></p>
                                    </div>
                                    <div class="col-md-4">
                                        <p class="mb-1"><strong>Department:</strong> <span id="viewEmployeeDept">-</span></p>
                                    </div>
                                    <div class="col-md-4">
                                        <p class="mb-1"><strong>Designation:</strong> <span id="viewEmployeeDesig">-</span></p>
                                    </div>
                                    <div class="col-md-4">
                                        <p class="mb-1"><strong>Email:</strong> <span id="viewEmployeeEmail">-</span></p>
                                    </div>
                                    <div class="col-md-4">
                                        <p class="mb-1"><strong>Phone:</strong> <span id="viewEmployeePhone">-</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row g-3 mb-4">
                            <div class="col-12 col-md-6">
                                <label for="viewMonth" class="form-label">Month</label>
                                <select class="form-control" id="viewMonth" name="month" required>
                                    <option value="">Select Month</option>
                                    <option value="1">January</option>
                                    <option value="2">February</option>
                                    <option value="3">March</option>
                                    <option value="4">April</option>
                                    <option value="5">May</option>
                                    <option value="6">June</option>
                                    <option value="7">July</option>
                                    <option value="8">August</option>
                                    <option value="9">September</option>
                                    <option value="10">October</option>
                                    <option value="11">November</option>
                                    <option value="12">December</option>
                                </select>
                            </div>
                            <div class="col-12 col-md-6">
                                <label for="viewYear" class="form-label">Year</label>
                                <select class="form-control" id="viewYear" name="year" required>
                                    <option value="">Select Year</option>
                                </select>
                            </div>
                        </div>
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-primary">View Payslip</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Payslip Details Modal -->
    <div class="modal fade" id="payslipDetailsModal" tabindex="-1" aria-labelledby="payslipDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="payslipDetailsModalLabel">Payslip Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="payslipDetailsContent">
                    <!-- Payslip details loaded -->
                </div>
            </div>
        </div>
    </div>

    <script src="assets/scripts/employeeList.js"></script>
    <script src="assets/scripts/navbar.js"></script>
</body>
</html> 